(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t){},359:function(e,t,n){e.exports=n(762)},364:function(e,t,n){},762:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(91),s=n.n(o),i=(n(364),n(332)),u=n(62),l=n.n(u),c=n(108),m=n(48),h=n(49),p=n(51),b=n(50),d=n(52),f=n(42),g=n.n(f),O={aws_project_region:"us-east-1",aws_cognito_identity_pool_id:"us-east-1:b5be30b6-598f-405c-be98-b47923464ab0",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_fxzk4IDIw",aws_user_pools_web_client_id:"47nuei3ou7s7le8h1hedvv75i",aws_appsync_graphqlEndpoint:"https://sklnprhm7jat3ovzobuz5p7agu.appsync-api.us-east-1.amazonaws.com/graphql",aws_appsync_region:"us-east-1",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_user_files_s3_bucket:"photoalbums76f3acc6a3cb48d9911ad6df8f67351e",aws_user_files_s3_bucket_region:"us-east-1",aws_content_delivery_bucket:"photoalbums-20181021085130--hostingbucket",aws_content_delivery_bucket_region:"us-east-1",aws_content_delivery_url:"https://d1zhmhvb7d7lky.cloudfront.net"},v=n(92),j=n(778),y=n(775),k=n(781),E=n(779),w=n(772),_=n(774),A=n(773),C=n(195),I=n(777),x=n(763),P=n(780),S=n(107);g.a.configure(O);var $=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(I.a,null,r.a.createElement(j.a,{padded:!0},r.a.createElement(j.a.Column,null,r.a.createElement(x.a,{path:"/",exact:!0,component:q}),r.a.createElement(x.a,{path:"/",exact:!0,component:T}),r.a.createElement(x.a,{path:"/albums/:albumId",render:function(){return r.a.createElement("div",null,r.a.createElement(P.a,{to:"/"},"Back to Albums list"))}}),r.a.createElement(x.a,{path:"/albums/:albumId",render:function(e){return r.a.createElement(N,{id:e.match.params.albumId})}}))))}}]),t}(a.Component),M=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"albumItems",value:function(){return this.props.albums.sort(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(n,a){if(!n.hasOwnProperty(e)||!a.hasOwnProperty(e))return 0;var r="string"===typeof n[e]?n[e].toUpperCase():n[e],o="string"===typeof a[e]?a[e].toUpperCase():a[e],s=0;return r>o&&(s=1),r<o&&(s=-1),"desc"===t?-1*s:s}}("name")).map(function(e){return r.a.createElement(y.a.Item,{key:e.id},r.a.createElement(P.a,{to:"/albums/".concat(e.id)},e.name))})}},{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement(E.a,{as:"h3"},"My Albums"),r.a.createElement(y.a,{divided:!0,relaxed:!0},this.albumItems()))}}]),t}(r.a.Component),T=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).onNewAlbum=function(e,t){var n=Object.assign({},e);return n.listAlbums.items=e.listAlbums.items.concat([t.onCreateAlbum]),n},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(v.Connect,{query:Object(f.graphqlOperation)("query ListAlbums {\n  listAlbums(limit: 9999) {\n      items {\n          id\n          name\n      }\n  }\n}"),subscription:Object(f.graphqlOperation)("\n  subscription OnCreateAlbum {\n    onCreateAlbum {\n      id\n      name\n    }\n  }\n"),onSubscriptionMsg:this.onNewAlbum},function(e){var t=e.data,n=e.loading;e.errors;return n?r.a.createElement("div",null,"Loading..."):t.listAlbums?r.a.createElement(M,{albums:t.listAlbums.items}):void 0})}}]),t}(r.a.Component),q=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).handleChange=function(e){var t={};t[e.target.name]=e.target.value,n.setState(t)},n.handleSubmit=function(){var e=Object(c.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"mutation NewAlbum($name: String!) {\n      createAlbum(input: {name: $name}) {\n        id\n        name\n      }\n    }",e.next=4,f.API.graphql(Object(f.graphqlOperation)("mutation NewAlbum($name: String!) {\n      createAlbum(input: {name: $name}) {\n        id\n        name\n      }\n    }",{name:n.state.albumName}));case 4:a=e.sent,console.info("Created album with id ".concat(a.data.createAlbum.id));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={albumName:""},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement(E.a,{as:"h3"},"Add a new album"),r.a.createElement(w.a,{type:"text",placeholder:"New Album Name",icon:"plus",iconPosition:"left",action:{content:"Create",onClick:this.handleSubmit},name:"albumName",value:this.state.albumName,onChange:this.handleChange}))}}]),t}(a.Component),N=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={nextTokenForPhotos:null,hasMorePhotos:!0,album:null,loading:!0},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"loadMorePhotos",value:function(){var e=Object(c.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.hasMorePhotos){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),e.next=5,f.API.graphql(Object(f.graphqlOperation)("query GetAlbum($id: ID!, $nextTokenForPhotos: String) {\n  getAlbum(id: $id) {\n    id\n    name\n    members\n    photos(sortDirection: DESC, nextToken: $nextTokenForPhotos) {\n      nextToken\n      items {\n        thumbnail {\n          width\n          height\n          key\n        }\n      }\n    }\n  }\n}\n",{id:this.props.id,nextTokenForPhotos:this.state.nextTokenForPhotos}));case 5:t=e.sent,n=t.data,null===this.state.album?a=n.getAlbum:(a=this.state.album).photos.items=a.photos.items.concat(n.getAlbum.photos.items),this.setState({album:a,loading:!1,nextTokenForPhotos:n.getAlbum.photos.nextToken,hasMorePhotos:null!==n.getAlbum.photos.nextToken});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.loadMorePhotos()}},{key:"render",value:function(){return r.a.createElement(U,{loadingPhotos:this.state.loading,album:this.state.album,loadMorePhotos:this.loadMorePhotos.bind(this),hasMorePhotos:this.state.hasMorePhotos})}}]),t}(r.a.Component),U=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.album?r.a.createElement(k.a,null,r.a.createElement(E.a,{as:"h3"},this.props.album.name),r.a.createElement(k.a.Group,null,r.a.createElement(k.a,null,r.a.createElement(L,{members:this.props.album.members})),r.a.createElement(k.a,{basic:!0},r.a.createElement(F,{albumId:this.props.album.id}))),r.a.createElement(D,{albumId:this.props.album.id}),r.a.createElement(B,{photos:this.props.album.photos.items}),this.props.hasMorePhotos&&r.a.createElement(_.a.Button,{onClick:this.props.loadMorePhotos,icon:"refresh",disabled:this.props.loadingPhotos,content:this.props.loadingPhotos?"Loading...":"Load more photos"})):"Loading album..."}}]),t}(a.Component),D=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).onChange=function(){var e=Object(c.a)(l.a.mark(function e(t){var a,r,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],r=Object(S.v4)(),n.setState({uploading:!0}),e.prev=3,e.next=6,f.Storage.put(r,a,{customPrefix:{public:"uploads/"},metadata:{albumid:n.props.albumId}});case 6:o=e.sent,console.log("Uploaded file: ",o),n.setState({uploading:!1}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[3,11]])}));return function(t){return e.apply(this,arguments)}}(),n.state={uploading:!1},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(_.a.Button,{onClick:function(){return document.getElementById("add-image-file-input").click()},disabled:this.state.uploading,icon:"file image outline",content:this.state.uploading?"Uploading...":"Add Image"}),r.a.createElement("input",{id:"add-image-file-input",type:"file",accept:"image/*",onChange:this.onChange,style:{display:"none"}}))}}]),t}(r.a.Component),B=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"photoItems",value:function(){return this.props.photos.map(function(e){return r.a.createElement(v.S3Image,{key:e.thumbnail.key,imgKey:e.thumbnail.key.replace("public/",""),style:{display:"inline-block",paddingRight:"5px"}})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(A.a,{hidden:!0}),this.photoItems())}}]),t}(r.a.Component),F=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).handleChange=function(e,t){var a=t.name,r=t.value;return n.setState(Object(i.a)({},a,r))},n.handleSubmit=function(){var e=Object(c.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"\n      mutation AddUser($username: String!, $albumId: String!) {\n          addUsernameToAlbum(username: $username, albumId: $albumId) {\n              id\n          }\n      }",e.next=4,f.API.graphql(Object(f.graphqlOperation)("\n      mutation AddUser($username: String!, $albumId: String!) {\n          addUsernameToAlbum(username: $username, albumId: $albumId) {\n              id\n          }\n      }",{username:n.state.username,albumId:n.props.albumId}));case 4:a=e.sent,console.log("Added ".concat(n.state.username," to album id ").concat(a.data.addUsernameToAlbum.id)),n.setState({username:""});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={username:""},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(w.a,{type:"text",placeholder:"Username",icon:"user plus",iconPosition:"left",action:{content:"Add",onClick:this.handleSubmit},name:"username",value:this.state.username,onChange:this.handleChange})}}]),t}(a.Component),L=function(e){return r.a.createElement("div",null,r.a.createElement(E.a,{as:"h4"},r.a.createElement(C.a,{name:"user circle"}),r.a.createElement(E.a.Content,null,"Members")),r.a.createElement(y.a,{bulleted:!0},e.members&&e.members.map(function(e){return r.a.createElement(y.a.Item,{key:e},e)})))},z=Object(v.withAuthenticator)($,{includeGreetings:!0});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[359,2,1]]]);
//# sourceMappingURL=main.fb353bc0.chunk.js.map